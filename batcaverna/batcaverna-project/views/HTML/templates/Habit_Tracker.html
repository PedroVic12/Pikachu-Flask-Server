<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Habits Tracker App</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React CDN -->
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <!-- Babel CDN -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Inter', sans-serif;
            -webkit-tap-highlight-color: transparent;
        }
        /* Custom scrollbar for better look */
        ::-webkit-scrollbar {
            width: 6px;
        }
        ::-webkit-scrollbar-track {
            background: #2d3748;
        }
        ::-webkit-scrollbar-thumb {
            background: #4a5568;
            border-radius: 3px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #718096;
        }
        .progress-ring__circle {
            transition: stroke-dashoffset 0.35s;
            transform: rotate(-90deg);
            transform-origin: 50% 50%;
        }
        .tab {
            cursor: pointer;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid transparent;
        }
        .tab-active {
            color: white;
            border-bottom-color: #f59e0b; /* amber-500 */
        }
    </style>
</head>
<body class="bg-gray-900 text-white antialiased">
    <div id="root"></div>

    <script type="text/babel">
        const startApp = () => {
            const { useState, useEffect, useMemo } = React;

            // --- Mock Data ---
            const initialHabits = [
                { id: 1, icon: 'üìñ', text: 'Ler 25 p√°ginas de um livro √∫til', xp: 15, lastCompleted: 'dom., 01 de jun.' },
                { id: 2, icon: 'üèÉ', text: 'Corrida matinal', xp: 20, lastCompleted: 'seg., 02 de jun.' },
                { id: 3, icon: 'üëÄ', text: 'Descansar os olhos por 15 minutos', xp: 5, lastCompleted: 'seg., 02 de jun.' },
                { id: 4, icon: 'üìû', text: 'Entrar em contato com familiares', xp: 10, lastCompleted: 'seg., 02 de jun.' },
                { id: 5, icon: 'üòä', text: 'Escovar os dentes', xp: 5, lastCompleted: 'qui., 05 de jun.' },
            ];
            
            const initialPlayer = {
                name: "Peter Parker",
                title: "Novato",
                level: 1,
                xp: 6,
                xpToNextLevel: 19,
                avatar: "https://placehold.co/100x100/334155/e2e8f0?text=PP"
            };

             const initialSkills = [
                { name: 'Sabedoria', level: 3, xp: 45, xpToNext: 100 },
                { name: 'Desenvolvimento Pessoal', level: 7, xp: 120, xpToNext: 250 },
                { name: 'Intelig√™ncia', level: 1, xp: 72, xpToNext: 100 },
                { name: 'Leitura', level: 2, xp: 30, xpToNext: 100 },
            ];

            const weeklyProgressData = [
                { day: 'Seg', completed: 3 },
                { day: 'Ter', completed: 5 },
                { day: 'Qua', completed: 2 },
                { day: 'Qui', completed: 4 },
                { day: 'Sex', completed: 6 },
                { day: 'S√°b', completed: 1 },
                { day: 'Dom', completed: 3 },
            ];
            
            // --- UI Components ---
            const ProgressCircle = ({ radius, stroke, progress }) => {
                const normalizedRadius = radius - stroke * 2;
                const circumference = normalizedRadius * 2 * Math.PI;
                const strokeDashoffset = circumference - (progress / 100) * circumference;

                return (
                    <svg height={radius * 2} width={radius * 2} className="transform -rotate-90">
                        <circle stroke="#4a5568" fill="transparent" strokeWidth={stroke} r={normalizedRadius} cx={radius} cy={radius} />
                        <circle stroke="#f59e0b" fill="transparent" strokeWidth={stroke} strokeDasharray={circumference + ' ' + circumference} style={{ strokeDashoffset }} r={normalizedRadius} cx={radius} cy={radius} />
                        <text x="50%" y="50%" textAnchor="middle" dy=".3em" className="text-2xl font-bold fill-white -rotate-90 transform-gpu" style={{ transform: 'rotate(90deg)', transformOrigin: '50% 50%' }}>
                            {`${Math.round(progress)}%`}
                        </text>
                    </svg>
                );
            };
            
            const PlayerStats = ({ player }) => {
                const xpPercentage = (player.xp / player.xpToNextLevel) * 100;
                return (
                    <div className="bg-gray-800 rounded-lg p-4 flex items-center space-x-4">
                        <img src={player.avatar} alt="Player Avatar" className="w-16 h-16 rounded-full border-2 border-gray-700"/>
                        <div className="flex-1">
                            <p className="font-bold text-lg">{player.name}</p>
                            <p className="text-sm text-gray-400">{player.title} N√≠vel {player.level}</p>
                            <p className="text-xs text-gray-400">Experi√™ncia (XP): {player.xp}</p>
                            <p className="text-xs text-gray-400">Para atingir pr√≥ximo n√≠vel {player.xpToNextLevel}</p>
                        </div>
                        <div className="w-24 h-24"><ProgressCircle radius={48} stroke={6} progress={xpPercentage} /></div>
                    </div>
                );
            };

            const HabitItem = ({ habit, onComplete }) => (
                <div className="bg-gray-800 rounded-lg p-4 flex items-center space-x-4 transition-all duration-200 hover:bg-gray-700">
                    <div className="text-2xl">{habit.icon}</div>
                    <div className="flex-1">
                        <p className="font-semibold">{habit.text}</p>
                        <p className="text-xs text-gray-400">{habit.lastCompleted}</p>
                    </div>
                    <button onClick={() => onComplete(habit)} className="w-10 h-10 flex items-center justify-center rounded-full border-2 border-gray-600 hover:bg-green-500 hover:border-green-400 transition-colors" aria-label={`Complete ${habit.text}`}>
                        <span className="text-2xl">‚úîÔ∏è</span>
                    </button>
                </div>
            );
            
            const AddHabit = ({ onAddHabit }) => {
                const [text, setText] = useState('');
                const [showModal, setShowModal] = useState(false);

                const handleSubmit = (e) => {
                    e.preventDefault();
                    if (!text.trim()) return;
                    onAddHabit(text);
                    setText('');
                    setShowModal(false);
                };

                if (!showModal) {
                    return (
                        <div className="fixed bottom-6 right-6">
                            <button onClick={() => setShowModal(true)} className="bg-amber-500 hover:bg-amber-600 text-white w-16 h-16 rounded-full flex items-center justify-center text-4xl shadow-lg transition-transform transform hover:scale-110">+</button>
                        </div>
                    );
                }
                
                return (
                     <div className="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 z-50">
                        <form onSubmit={handleSubmit} className="bg-gray-800 p-6 rounded-lg w-full max-w-sm">
                            <h3 className="text-lg font-bold mb-4">Adicionar Novo H√°bito</h3>
                            <input type="text" value={text} onChange={(e) => setText(e.target.value)} placeholder="Ex: Praticar React por 1 hora" className="w-full bg-gray-700 text-white p-3 rounded-md border border-gray-600 focus:outline-none focus:ring-2 focus:ring-amber-500" autoFocus />
                             <div className="flex justify-end space-x-3 mt-4">
                                <button type="button" onClick={() => setShowModal(false)} className="px-4 py-2 rounded-md bg-gray-600 hover:bg-gray-500 transition-colors">Cancelar</button>
                                <button type="submit" className="px-4 py-2 rounded-md bg-amber-500 hover:bg-amber-600 transition-colors">Adicionar</button>
                            </div>
                        </form>
                    </div>
                );
            };
            
            const CompletionModal = ({ habit, player, onClose }) => {
                if (!habit) return null;
                const baseXP = player.xp - habit.xp;
                const levelBefore = player.level - (player.xp < baseXP ? 1 : 0);
                const characteristics = [
                    { name: 'Sabedoria', xp: (habit.xp * 0.3).toFixed(2) },
                    { name: 'Desenvolvimento pessoal', xp: (habit.xp * 0.5).toFixed(2) },
                    { name: 'Intelig√™ncia', xp: (habit.xp * 0.2).toFixed(2) },
                ];

                return (
                    <div className="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50" onClick={onClose}>
                        <div className="bg-gray-800 rounded-lg p-6 w-full max-w-md shadow-2xl" onClick={e => e.stopPropagation()}>
                            <div className="flex justify-between items-start mb-4">
                                <div>
                                    <h2 className="text-xl font-bold">Tarefa realizada</h2>
                                    <p className="text-gray-400 flex items-center mt-1"><span className="text-xl mr-2">{habit.icon}</span>{habit.text}</p>
                                </div>
                                <button onClick={onClose} className="text-gray-400 hover:text-white text-2xl">X</button>
                            </div>
                            <div className="bg-gray-900 rounded-md p-4 mb-4">
                                <p className="font-semibold">{player.name}</p>
                                <div className="flex items-center space-x-2 text-green-400">
                                    <p>+{habit.xp} XP</p>
                                    {player.level > levelBefore && <span className="text-amber-500 font-bold animate-pulse">LEVEL UP!</span>}
                                </div>
                            </div>
                            <div>
                                <h3 className="font-semibold text-lg mb-2">Caracter√≠sticas:</h3>
                                <div className="space-y-2">
                                    {characteristics.map(char => (
                                        <div key={char.name} className="flex justify-between items-center bg-gray-700 p-3 rounded-md">
                                            <div><p>{char.name}</p><p className="text-sm text-green-400">+{char.xp} XP</p></div>
                                            <div className="w-8 h-8 rounded-full bg-blue-500 flex items-center justify-center font-bold text-sm">{Math.floor(Math.random() * 5 + 1)}</div>
                                        </div>
                                    ))}
                                </div>
                            </div>
                            <div className="mt-6 flex justify-end">
                                <button onClick={onClose} className="bg-amber-500 hover:bg-amber-600 text-white font-bold py-2 px-6 rounded-lg transition-colors">OK</button>
                            </div>
                        </div>
                    </div>
                );
            };

            // --- View Components for Tabs ---
            const HeroView = ({ player, habits, onCompleteHabit, onAddHabit }) => (
                <>
                    <div className="mb-6"><PlayerStats player={player} /></div>
                    <div className="flex justify-between items-center mb-4">
                        <h2 className="text-xl font-bold">Hoje ({habits.length})</h2>
                    </div>
                    <div className="space-y-3">
                        {habits.map(habit => <HabitItem key={habit.id} habit={habit} onComplete={onCompleteHabit} />)}
                    </div>
                    <AddHabit onAddHabit={onAddHabit} />
                </>
            );

            const DashboardView = ({ progressData }) => {
                 const maxCompleted = Math.max(...progressData.map(d => d.completed), 0) || 1;
                return (
                    <div className="bg-gray-800 rounded-lg p-6">
                        <h2 className="text-xl font-bold mb-4">Acompanhamento Semanal</h2>
                        <div className="flex justify-between items-end h-48 space-x-2">
                             {progressData.map(data => (
                                <div key={data.day} className="flex flex-col items-center flex-1">
                                    <div className="w-full bg-gray-700 rounded-t-md flex-grow flex items-end">
                                        <div className="bg-amber-500 w-full rounded-t-md" style={{ height: `${(data.completed / maxCompleted) * 100}%` }}></div>
                                    </div>
                                    <p className="text-xs text-gray-400 mt-2">{data.day}</p>
                                </div>
                            ))}
                        </div>
                    </div>
                );
            };

            const SkillsView = ({ skills }) => (
                 <div className="bg-gray-800 rounded-lg p-6">
                    <h2 className="text-xl font-bold mb-4">Minhas Habilidades</h2>
                    <div className="space-y-4">
                        {skills.map(skill => {
                            const progress = (skill.xp / skill.xpToNext) * 100;
                            return (
                                <div key={skill.name}>
                                    <div className="flex justify-between mb-1">
                                        <span className="font-semibold">{skill.name} - N√≠vel {skill.level}</span>
                                        <span className="text-sm text-gray-400">{skill.xp} / {skill.xpToNext} XP</span>
                                    </div>
                                    <div className="w-full bg-gray-700 rounded-full h-2.5">
                                        <div className="bg-blue-500 h-2.5 rounded-full" style={{ width: `${progress}%` }}></div>
                                    </div>
                                </div>
                            );
                        })}
                    </div>
                </div>
            );
            
            // --- Main App Component ---
            const App = () => {
                const [player, setPlayer] = useState(initialPlayer);
                const [habits, setHabits] = useState(initialHabits);
                const [skills, setSkills] = useState(initialSkills);
                const [completedHabit, setCompletedHabit] = useState(null);
                const [activeTab, setActiveTab] = useState('heroi');

                const handleCompleteHabit = (habit) => {
                    let newXp = player.xp + habit.xp;
                    let newLevel = player.level;
                    let newXpToNextLevel = player.xpToNextLevel;

                    if (newXp >= player.xpToNextLevel) {
                        newLevel += 1;
                        newXp -= player.xpToNextLevel;
                        newXpToNextLevel = Math.floor(player.xpToNextLevel * 1.5);
                    }
                    
                    setPlayer({ ...player, xp: newXp, level: newLevel, xpToNextLevel: newXpToNextLevel });
                    setCompletedHabit({ ...habit });
                };

                const handleAddHabit = (text) => {
                     const newHabit = { id: Date.now(), icon: '‚≠ê', text, xp: Math.floor(Math.random() * 10 + 5), lastCompleted: 'hoje' };
                     setHabits(prevHabits => [...prevHabits, newHabit]);
                };

                return (
                    <div className="max-w-2xl mx-auto p-4 md:p-6">
                        <header className="mb-6">
                            <h1 className="text-3xl font-bold mb-2">Habits Tracker App</h1>
                            <div className="flex items-center space-x-6 text-gray-400 border-b-2 border-gray-800">
                                 <span className={`tab ${activeTab === 'heroi' ? 'tab-active' : ''}`} onClick={() => setActiveTab('heroi')}>HER√ìI</span>
                                 <span className={`tab ${activeTab === 'dashboard' ? 'tab-active' : ''}`} onClick={() => setActiveTab('dashboard')}>DASHBOARD</span>
                                 <span className={`tab ${activeTab === 'habilidades' ? 'tab-active' : ''}`} onClick={() => setActiveTab('habilidades')}>HABILIDADES</span>
                            </div>
                        </header>
                        
                        <main>
                            {activeTab === 'heroi' && <HeroView player={player} habits={habits} onCompleteHabit={handleCompleteHabit} onAddHabit={handleAddHabit} />}
                            {activeTab === 'dashboard' && <DashboardView progressData={weeklyProgressData} />}
                            {activeTab === 'habilidades' && <SkillsView skills={skills} />}
                        </main>
                        
                        <CompletionModal habit={completedHabit} player={player} onClose={() => setCompletedHabit(null)} />
                    </div>
                );
            };

            const root = ReactDOM.createRoot(document.getElementById('root'));
            root.render(<App />);
        }

        startApp();
    </script>
</body>
</html>

