<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Habit Tracker - Saiyan Mode</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & Babel for JSX -->
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #111827; /* gray-900 */
            color: #f3f4f6; /* gray-100 */
        }
        /* Efeito de aura para Super Saiyan */
        .super-saiyan-aura {
            box-shadow: 0 0 15px 5px rgba(250, 204, 21, 0.7), 0 0 30px 10px rgba(251, 146, 60, 0.5);
        }
        .xp-bar-transition {
            transition: width 0.5s ease-in-out;
        }
        .level-up-animation {
            animation: levelUp 0.8s ease-in-out;
        }
        @keyframes levelUp {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.2); opacity: 0.7; }
            100% { transform: scale(1); opacity: 1; }
        }
    </style>
</head>
<body>

    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;

        // --- DADOS INICIAIS ---
        const initialHabits = [
            { id: 1, text: 'Treinar por 30 minutos', type: 'good', completed: false },
            { id: 2, text: 'Ler 10 páginas de um livro', type: 'good', completed: false },
            { id: 3, text: 'Comer fast-food', type: 'bad', completed: false },
            { id: 4, text: 'Estudar programação por 1 hora', type: 'good', completed: false },
            { id: 5, text: 'Ficar procrastinando nas redes sociais', type: 'bad', completed: false },
        ];

        // --- COMPONENTES DE UI ---

        const Header = ({ level, xp, status, isSuperSaiyan }) => {
            const [levelUpKey, setLevelUpKey] = useState(0);

            useEffect(() => {
                setLevelUpKey(prevKey => prevKey + 1);
            }, [level]);
            
            const headerClass = isSuperSaiyan 
                ? "bg-yellow-400/10 border-yellow-500" 
                : "bg-gray-800/50 border-gray-700";
            
            const statusClass = isSuperSaiyan
                ? "text-yellow-300 font-black tracking-wider"
                : "text-blue-300 font-bold";

            const xpBarClass = isSuperSaiyan
                ? "bg-yellow-400"
                : "bg-blue-500";

            return (
                <div className={`p-4 rounded-lg border ${headerClass} mb-6`}>
                    <div className="flex justify-between items-center mb-3">
                        <div key={levelUpKey} className={`level-up-animation`}>
                            <span className="text-gray-400">Nível</span>
                            <span className="text-3xl font-bold ml-2">{level}</span>
                        </div>
                        <div className={`text-xl ${statusClass}`}>{status}</div>
                    </div>
                    {/* XP Bar */}
                    <div className="w-full bg-gray-700 rounded-full h-4">
                        <div 
                            className={`h-4 rounded-full xp-bar-transition ${xpBarClass}`}
                            style={{ width: `${xp}%` }}
                        ></div>
                    </div>
                    <div className="text-right text-sm mt-1 text-gray-400">{xp} / 100 XP</div>
                </div>
            );
        };
        
        const HabitItem = ({ habit, onComplete, onFail, isSuperSaiyan }) => {
            const buttonClassGood = `px-4 py-1 text-sm font-bold text-green-900 rounded-md transition-transform transform hover:scale-105 ${isSuperSaiyan ? 'bg-yellow-400 hover:bg-yellow-300' : 'bg-green-400 hover:bg-green-300'}`;
            const buttonClassBad = `px-4 py-1 text-sm font-bold text-red-900 bg-red-500 hover:bg-red-400 rounded-md transition-transform transform hover:scale-105`;
            const completedClass = "opacity-50 line-through";

            return (
                <div className={`bg-gray-800 p-4 rounded-lg flex items-center justify-between ${habit.completed ? completedClass : ''}`}>
                    <span className="flex-grow">{habit.text}</span>
                    {habit.type === 'good' ? (
                        <button onClick={() => onComplete(habit.id)} disabled={habit.completed} className={buttonClassGood}>+25 XP</button>
                    ) : (
                        <button onClick={() => onFail(habit.id)} disabled={habit.completed} className={buttonClassBad}>-10 XP</button>
                    )}
                </div>
            );
        };

        const AddHabitForm = ({ onAddHabit }) => {
            const [text, setText] = useState('');
            const [type, setType] = useState('good');

            const handleSubmit = (e) => {
                e.preventDefault();
                if (!text.trim()) return;
                onAddHabit({ text, type });
                setText('');
            };

            return (
                <form onSubmit={handleSubmit} className="mt-8 p-4 bg-gray-800 rounded-lg">
                    <h3 className="text-lg font-bold mb-3">Adicionar Novo Hábito</h3>
                    <input
                        type="text"
                        value={text}
                        onChange={(e) => setText(e.target.value)}
                        placeholder="Ex: Meditar por 10 minutos"
                        className="w-full p-2 rounded bg-gray-700 border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 mb-3"
                    />
                    <div className="flex gap-4 mb-3">
                        <label className="flex items-center gap-2">
                            <input type="radio" name="type" value="good" checked={type === 'good'} onChange={(e) => setType(e.target.value)} className="form-radio text-green-500 bg-gray-700"/>
                            <span>Bom Hábito</span>
                        </label>
                        <label className="flex items-center gap-2">
                            <input type="radio" name="type" value="bad" checked={type === 'bad'} onChange={(e) => setType(e.target.value)} className="form-radio text-red-500 bg-gray-700"/>
                            <span>Mau Hábito</span>
                        </label>
                    </div>
                    <button type="submit" className="w-full bg-blue-600 hover:bg-blue-500 text-white font-bold py-2 px-4 rounded">
                        Adicionar
                    </button>
                </form>
            );
        };

        // --- COMPONENTE PRINCIPAL ---
        const App = () => {
            const [level, setLevel] = useState(1);
            const [xp, setXp] = useState(0);
            const [habits, setHabits] = useState(initialHabits);

            const isSuperSaiyan = useMemo(() => level >= 3, [level]);
            const status = isSuperSaiyan ? "Super Saiyan" : "Guerreiro Z";
            
            // Efeito para monitorar XP e subir de nível
            useEffect(() => {
                if (xp >= 100) {
                    setLevel(prevLevel => prevLevel + 1);
                    setXp(prevXp => prevXp - 100);
                }
            }, [xp]);

            const handleCompleteHabit = (id) => {
                setHabits(habits.map(h => h.id === id ? { ...h, completed: true } : h));
                setXp(prevXp => prevXp + 25);
            };

            const handleFailHabit = (id) => {
                setHabits(habits.map(h => h.id === id ? { ...h, completed: true } : h));
                setXp(prevXp => Math.max(0, prevXp - 10)); // XP não pode ser negativo
            };

            const handleAddHabit = (newHabitData) => {
                const newHabit = {
                    id: Date.now(),
                    text: newHabitData.text,
                    type: newHabitData.type,
                    completed: false,
                };
                setHabits([...habits, newHabit]);
            };
            
            const containerClass = isSuperSaiyan 
                ? "bg-gradient-to-br from-yellow-900/50 via-gray-900 to-gray-900 super-saiyan-aura" 
                : "bg-gray-900";

            return (
                <div className={`min-h-screen p-4 md:p-8 transition-all duration-500 ${containerClass}`}>
                    <div className="max-w-2xl mx-auto">
                        <Header level={level} xp={xp} status={status} isSuperSaiyan={isSuperSaiyan} />
                        
                        <div className="space-y-4">
                            <div>
                                <h2 className="text-xl font-bold mb-3 text-green-400">Bons Hábitos</h2>
                                <div className="space-y-2">
                                    {habits.filter(h => h.type === 'good').map(habit => (
                                        <HabitItem key={habit.id} habit={habit} onComplete={handleCompleteHabit} isSuperSaiyan={isSuperSaiyan} />
                                    ))}
                                </div>
                            </div>
                             <div>
                                <h2 className="text-xl font-bold mb-3 text-red-400">Maus Hábitos</h2>
                                <div className="space-y-2">
                                    {habits.filter(h => h.type === 'bad').map(habit => (
                                        <HabitItem key={habit.id} habit={habit} onFail={handleFailHabit} />
                                    ))}
                                </div>
                            </div>
                        </div>

                        <AddHabitForm onAddHabit={handleAddHabit} />

                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);

    </script>

</body>
</html>
